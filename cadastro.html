<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Amigo Secreto</title>
  <link rel="stylesheet" href="style2.css">
</head>
<body>
  <div class="container">
    <h1>Cadastro</h1>
    <input type="text" id="nome" placeholder="Digite seu nome">
    <input type="password" id="senha" placeholder="Crie uma senha">
    <div class="avatar-grid" id="avatarContainer"></div>
    <button onclick="cadastrarParticipante()">Cadastrar</button>
  </div>

  <script>
    const avatarContainer = document.getElementById('avatarContainer')
    const avatarPaths = Array.from({length: 10}, (_, i) => `https://gabrig07.github.io/amigo-secreto/assets/avatars/avatar${i+1}.png`)
    let selectedAvatar = null
    avatarPaths.forEach(path => {
      const img = document.createElement('img')
      img.src = path
      img.classList.add('avatar-option')
      img.onclick = () => {
        document.querySelectorAll('.avatar-option').forEach(a => a.classList.remove('selected'))
        img.classList.add('selected')
        selectedAvatar = path
      }
      avatarContainer.appendChild(img)
    })
    function cadastrarParticipante() {
      const nome = document.getElementById('nome').value.trim()
      const senha = document.getElementById('senha').value.trim()
      if (!nome || !senha || !selectedAvatar) {
        alert('Preencha o nome, senha e selecione um avatar.')
        return
      }
      const participantes = JSON.parse(localStorage.getItem('participantes')) || []
      if (participantes.find(p => p.nome.toLowerCase() === nome.toLowerCase())) {
        alert('Esse nome já está cadastrado.')
        return
      }
      participantes.push({ nome, senha, avatar: selectedAvatar })
      localStorage.setItem('participantes', JSON.stringify(participantes))
      alert('Cadastro realizado com sucesso!')
      window.location.href = 'resultado.html'
    }
  </script>
</body>
</html>
